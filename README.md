# h5协议自动化前端

基于 Vue3 + Vite + Element Plus 的协议管理系统前端。

## 功能特性

### 协议管理
- ✅ 协议文件列表展示（支持分页、搜索、筛选）
- ✅ 协议文件的创建、编辑、删除
- ✅ 多种编辑模式：可视化编辑、富文本编辑、预览模式
- ✅ 实时预览（支持 JavaScript 执行）
- ✅ Word 文档导入（.doc, .docx）
- ✅ 协议内容全屏编辑

### 链接生成
- ✅ 通用协议链接快速生成
- ✅ 动态参数配置
- ✅ 历史记录管理
- ✅ 一键复制和预览

### Git 管理
- ✅ 代码拉取和推送
- ✅ 提交历史查看
- ✅ 自动化部署
- ✅ 分支状态监控

### 用户管理（管理员）
- ✅ 用户列表管理
- ✅ 角色权限控制（admin/editor/viewer）
- ✅ 用户启用/禁用
- ✅ 操作日志审计

## 技术栈

- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **UI 组件库**: Element Plus
- **HTTP 客户端**: Axios
- **路由**: Vue Router
- **状态管理**: Pinia
- **Word 解析**: Mammoth.js

## 安装依赖

```bash
npm install
```

## 开发运行

```bash
npm run dev
```

访问 http://localhost:3000

## 构建生产版本

```bash
npm run build
```

## 项目结构

```
src/
├── api/              # API 接口封装
├── components/       # 公共组件
├── config/           # 配置文件
├── router/           # 路由配置
├── stores/           # Pinia 状态管理
├── utils/            # 工具函数
└── views/            # 页面组件
```

## 编辑模式说明

### 1. 可视化编辑模式
- 左侧编辑 HTML 代码，右侧实时预览
- 支持 JavaScript 执行
- 适合精确控制格式

### 2. 富文本编辑模式
- 所见即所得编辑
- 支持字体、字号、颜色等样式设置
- 支持撤销/重做
- 适合快速编辑文本内容

### 3. 预览模式
- 填写参数预览最终效果
- 适用于参数化协议
- 实时生成预览链接

## 用户角色权限

| 角色 | 权限说明 |
|------|----------|
| **admin** | 管理员，拥有所有权限（协议管理、用户管理、日志查看、Git 操作） |
| **editor** | 编辑者，可以编辑协议和执行 Git 操作 |
| **viewer** | 查看者，只能查看协议列表和生成链接 |

## 注册说明

- 用户名必须以 `@fun.tv` 结尾（如：zhangsan@fun.tv）
- 密码要求：至少 8 位，包含大小写字母和数字

## 环境配置

开发环境和生产环境的 API 地址配置在 `src/config/api.js`

## 相关文档

- 后端项目：`../h5_protocol_server`
- 部署文档：参考后端项目的 `README_DEPLOY.md`
